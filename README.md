<artifact artifact_id="442d081f-efca-4fe0-beeb-9b57310049da" artifact_version_id="5f8a2b4c-9d7e-4a1b-8c3f-2e5a6d7b8c9d" title="README.md" contenttype="text/markdown">
<h1>BI Mate: Telegram Chatbot for Sales Analytics</h1>
<p>BI Mate — это чат-бот, разработанный для отдела продаж компании, занимающейся розничной торговлей косметикой, парфюмерией и товарами для дома. Бот служит многофункциональным BI-инструментом (Business Intelligence), предоставляя сотрудникам оперативный доступ к аналитике продаж, визуализации данных и автоматизированным отчетам. Он интегрируется с базой данных PostgreSQL, обеспечивает шифрование конфиденциальной информации и генерирует интерактивные графики, дашборды и отчеты в форматах PNG, PDF и DOCX.</p>
<p>Бот оптимизирует внутренние процессы, сокращая время на рутинный анализ данных, и помогает принимать обоснованные решения на основе KPI, таких как объемы продаж, динамика заказов, выручка по категориям, городам и методам оплаты. Разработка основана на принципах безопасности Telegram и экономической эффективности, с сроком окупаемости около 5 месяцев.</p>
<h2>Основные возможности</h2>
<ul>
<li><strong>Аналитика продаж</strong>:
<ul>
<li>Динамика выручки и заказов по дням/неделям/месяцам/годам.</li>
<li>Выручка по категориям товаров, городам, методам оплаты.</li>
<li>Распределение по полу покупателей.</li>
<li>Топ-10 товаров и топ-15 брендов по продажам.</li>
</ul>
</li>
<li><strong>Визуализация данных</strong>: Автоматическая генерация графиков (линейные, барчарты, круговые диаграммы) с использованием Matplotlib и Seaborn. Графики сохраняются в PNG и интегрируются в отчеты.</li>
<li><strong>Отчеты</strong>:
<ul>
<li><strong>Дашборд</strong>: Ключевые метрики (общая выручка, количество заказов, средний чек) в PDF с визуальными элементами.</li>
<li><strong>Еженедельные и ежемесячные отчеты</strong>: Детализированные DOCX-файлы с таблицами, графиками и анализом данных.</li>
</ul>
</li>
<li><strong>Анализ товаров</strong>: Интерактивные данные и графики по конкретным товарам (количество проданных единиц, выручка).</li>
<li><strong>Анализ продаж</strong>: Общий обзор продаж за период с графиками и статистикой.</li>
<li><strong>Безопасность</strong>: Шифрование данных с использованием Fernet (cryptography), аутентификация через Telegram, анализ уязвимостей мессенджера. Доступ ограничен сотрудниками отдела.</li>
<li><strong>Интеграция</strong>: Подключение к PostgreSQL для реального времени данных. Поддержка облачных серверов (Timeweb Cloud) для хостинга бота и БД.</li>
<li><strong>Интерфейс</strong>: Удобное меню на основе кнопок (ReplyKeyboardMarkup и InlineKeyboardMarkup), без необходимости ввода текста. Поддержка выбора периодов (год/месяц/неделя).</li>
</ul>
<p>Бот автоматизирует 15 рабочих мест, снижает нагрузку на сотрудников и повышает эффективность на основе исторических данных о продажах.</p>
<h2>Целевая аудитория</h2>
<ul>
<li>Менеджеры по продажам: Оперативный доступ к KPI и отчетам.</li>
<li>Аналитики и руководители: Визуализация трендов, прогнозирование на основе данных.</li>
<li>Сотрудники отдела продаж: Упрощение рутинных задач, фокус на стратегических действиях.</li>
</ul>
<h2>Технологии</h2>
<ul>
<li><strong>Язык программирования</strong>: Python 3.12+.</li>
<li><strong>Фреймворк для бота</strong>: Aiogram (асинхронная библиотека для Telegram Bot API).</li>
<li><strong>База данных</strong>: PostgreSQL (СУБД для хранения данных о заказах, товарах, клиентах). Инструменты: pgAdmin4 для проектирования и управления.</li>
<li><strong>Визуализация</strong>: Matplotlib, Seaborn для графиков; ReportLab для PDF-дашбордов; python-docx для Word-отчетов.</li>
<li><strong>Безопасность</strong>: Cryptography (Fernet для шифрования), анализ Telegram API (end-to-end encryption в secret chats).</li>
<li><strong>Развертывание</strong>: Облачные серверы (Timeweb Cloud). Инструменты: WinSCP для файлового управления, PuTTY для SSH-доступа.</li>
<li><strong>IDE</strong>: Visual Studio Code для разработки.</li>
<li><strong>Дополнительно</strong>: dotenv для переменных окружения, asyncio для асинхронности, logging для мониторинга.</li>
</ul>
<p>База данных спроектирована с ER-диаграммами, включает таблицы для заказов (Order), товаров (Goods), клиентов (Customer) и т.д. SQL-запросы оптимизированы для аналитики (GROUP BY, DATE_TRUNC).</p>
<h2>Экономическая эффективность</h2>
<ul>
<li><strong>Общие инвестиции</strong>: 397 939 руб. (235 711 руб. — собственные средства, 162 228 руб. — заемные без процентов).</li>
<li><strong>TCO (Total Cost of Ownership)</strong>: 1 060 001 руб. за 3 года (разработка: 397 939 руб., эксплуатация: 662 062 руб.).</li>
<li><strong>Жизненный цикл</strong>: 3 года (3 месяца разработка + 2 года 9 месяцев эксплуатация).</li>
<li><strong>Ключевые показатели</strong>:
<ul>
<li>NPV (Чистый дисконтированный доход): 2 577 459 руб. (ставка дисконтирования WACC: 16,4%).</li>
<li>IRR (Внутренняя норма доходности): 20,4%.</li>
<li>PI_mod (Коэффициент удельной эффективности): 6,48.</li>
<li>NTV (Чистая терминальная стоимость): 4 733 780 руб.</li>
<li>PPs (Простой срок окупаемости): 5,29 месяцев.</li>
<li>PPd (Дисконтированный срок окупаемости): 5,09 месяцев.</li>
</ul>
</li>
<li>Проект коммерчески эффективен: положительный денежный поток, окупаемость менее года, ROI > 500%.</li>
</ul>
<p>Расчеты учитывают временную стоимость денег, инфляцию и альтернативные издержки.</p>
<h2>Установка и запуск</h2>
<ol>
<li><strong>Клонируйте репозиторий</strong>:
<pre><code class="language-bash">git clone https://github.com/username/bi-mate-sales-bot.git
cd bi-mate-sales-bot
</code></pre>
</li>
<li><strong>Установите зависимости</strong> (Python 3.12+):
<pre><code class="language-bash">pip install -r requirements.txt
</code></pre>
(Включает aiogram, psycopg2, matplotlib, seaborn, reportlab, python-docx, cryptography, python-dotenv и др.)</li>
<li><strong>Настройте окружение</strong>:
<ul>
<li>Создайте <code>.env</code> файл:
<pre><code>API_TOKEN=your_telegram_bot_token
ENCRYPTION_KEY=your_fernet_key
DB_NAME=your_db_name
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_HOST=your_db_host
DB_PORT=your_db_port
</code></pre>
</li>
<li>Получите токен бота от @BotFather в Telegram.</li>
<li>Сгенерируйте ключ шифрования: <code>from cryptography.fernet import Fernet; print(Fernet.generate_key())</code>.</li>
<li>Настройте PostgreSQL: Импортируйте схему БД (SQL-скрипты в <code>/db/</code>).</li>
</ul>
</li>
<li><strong>Разверните на сервере</strong>:
<ul>
<li>Арендуйте VPS (Timeweb Cloud или аналог).</li>
<li>Используйте PuTTY для SSH, WinSCP для загрузки файлов.</li>
<li>Установите PostgreSQL и настройте БД с pgAdmin4.</li>
<li>Запустите бота: <code>python bot4g2.py</code>.</li>
</ul>
</li>
<li><strong>Тестирование</strong>:
<ul>
<li>Запустите локально: <code>python bot4g2.py</code>.</li>
<li>Добавьте бота в Telegram и протестируйте функции (графики, отчеты).</li>
</ul>
</li>
</ol>
<h2>Пример использования</h2>
<ul>
<li><strong>Пользователь</strong>: Нажимает "Графики" → "Динамика выручки" → Выбирает период (например, месяц: Январь 2025).</li>
<li><strong>Бот</strong>: Генерирует линейный график выручки по дням и отправляет PNG-файл.</li>
<li><strong>Отчет</strong>: Выбирает "Еженедельный" → Указывает неделю → Получает DOCX с таблицами, графиками и анализом.</li>
</ul>
<p>Пример SQL-запроса для динамики продаж (в коде):</p>
<pre><code class="language-sql">SELECT DATE_TRUNC('day', o."Date_order") AS "День", SUM(og."Sum_and_discont_og") AS "Общая выручка"
FROM "Order" o LEFT JOIN "Order_goods" og ON o."OrderID" = og."OrderID"
WHERE o."Date_order" BETWEEN %s AND %s GROUP BY "День" ORDER BY "День" ASC;
</code></pre>
<h2>Структура репозитория</h2>
<ul>
<li><code>/src/</code>: Основной код (bot4g2.py).</li>
<li><code>/db/</code>: SQL-скрипты для БД (схема, данные).</li>
<li><code>/logs/</code>: Файлы логов (bot4g2.log).</li>
<li><code>requirements.txt</code>: Зависимости.</li>
<li><code>.env.example</code>: Шаблон конфигурации.</li>
<li><code>README.md</code>: Это руководство.</li>
</ul>
<h2>Контрибьютинг</h2>
<p>Приветствуем вклады! Создайте issue или pull request. Следуйте PEP 8 для кода. Тестируйте на локальной БД. Обсудите новые функции в issues.</p>
<h2>Лицензия</h2>
<p>MIT License. См. <a href="LICENSE">LICENSE</a>.</p>
<h2>Дополнительные ресурсы</h2>
<ul>
<li>Дипломная работа: <a href="path/to/diploma.docx">ДИПЛОМ_2025_ИЭФ_ЭББ_411_Калинина_А_В.docx</a> — Полное описание разработки, анализа и экономических расчетов.</li>
<li>Безопасность: Анализ Telegram (end-to-end encryption), меры защиты данных.</li>
<li>Развертывание: Инструкции по Timeweb Cloud, BotFather.</li>
</ul>
<p>Проект разработан в рамках бакалаврской работы по направлению 38.03.05 «Бизнес-информатика» (РУТ МИИТ, 2025).</p>
</artifact>
